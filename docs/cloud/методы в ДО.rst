.. _Docflows: http://extern-api.testkontur.ru/swagger/ui/index#/Docflows
.. _`POST SignReplyDocumentAsync`: http://extern-api.testkontur.ru/swagger/ui/index#/Docflows/DocflowReplyDocument_SignReplyDocumentAsync
.. _`POST SignConfirmReplyDocumentAsync`: http://extern-api.testkontur.ru/swagger/ui/index#/Docflows/DocflowReplyDocument_SignConfirmReplyDocumentAsync
.. _`POST DecryptDocumentAsync`: http://extern-api.testkontur.ru/swagger/ui/index#/Docflows/Docflows_DecryptDocumentAsync
.. _`POST DecryptDocumentConfirmationAsync`: http://extern-api.testkontur.ru/swagger/ui/index#/Docflows/Docflows_DecryptDocumentConfirmationAsync

Методы для работы в документооборотах
=====================================

Особенностью в части работы с документооборотами в случае использования облачной подписи является доступность методов для подписания и расшифровки документов, возникающих в ходе документооборота.

.. image:: /cloud.jpg

* в запросе передаются документы, которые необходимо подписать или расшифровать,
* в ответ возвращается идентификатор запроса, отправляется смс-сообщением с кодом,
* полученный код передается в запросе на подтверждение операции,
* расшифрованный контент документа сохраняется в документообороте / добавляется подпись под ответный документ

Подробная спецификация методов показана в сваггере в разделе Docflows_.

Список доступных методов:

* `Подпись ответного документа`_
* `Подтверждение подписи ответного документа`_
* `Дешифрование документа`_
* `Подтверждение дешифрования документа`_

Подпись ответного документа
---------------------------
Метод: `POST SignReplyDocumentAsync`_

Позволяет подписать сгенерированный ответный документ. 

.. important:: Для подписи извещений о получении на документы от ФНС или Росстата допускается указывать параметр ``forceConfirmation=true``, тогда подписание документа произойдет сразу, без необходимости подтверждения кодом из смс-сообщения.

Подтверждение подписи ответного документа
-----------------------------------------
Метод: `POST SignConfirmReplyDocumentAsync`_

После ввода кода, полученного в смс-сообщении произойдет подписание документа.

Дешифрование документа
----------------------
Метод: `POST DecryptDocumentAsync`_

С помощью данного метода можно расшифровать любой зашифрованный документ в ходе документооборота. 

Подтверждение дешифрования документа
------------------------------------
Метод: `POST DecryptDocumentConfirmationAsync`_

После ввода кода, полученного в смс-сообщении, произойдет дешифрование документа. Расшифрованный контент документа добавится в документооборот.
