.. _`POST BuildDocument`: https://developer.testkontur.ru/extern/post-v1-%7BaccountId%7D-drafts-%7BdraftId%7D-documents-%7BdocumentId%7D-build
.. _`POST BuildDocumentContent`: https://developer.testkontur.ru/extern/post-v1-%7BaccountId%7D-drafts-%7BdraftId%7D-build-document


Методы создания ИОН запросов и декларации УСН в черновике
=========================================================

Некоторые формализованные документы для ФНС можно создать прямо в черновике, а не загружать уже готовые. Список форм, которые доступны для формирования:

* декларации по упрощенной системе налогообложения по ставке 6% или 15%, ставка определяется по версии :doc:`контракта</manuals/contracts>`;
* запрос на сверку с налоговой (ИОН запрос).

По :doc:`контрактам</manuals/contracts>` методы данного раздела формируют документы в черновике. Контракт указывает на тип и формат документа, а также содержит информацию, которая будет передана в ФНС. 

Существует пять видов ИОН запросов:

1. Запрос по справке о состоянии расчетов по налогам, сборам, пеням и штрафам (Форма N39-1);
2. Запрос по выписке операций по расчетам с бюджетом;
3. Запрос по перечню налоговых деклараций (расчетов) и бухгалтерской отчетности;
4. Запрос по акту сверки расчетов по налогам, сборам, пеням и штрафам;
5. Запрос справки об исполнении налогоплательщиком (плательщиком сборов, налоговым агентом) обязанности по уплате налогов, сборов, пеней, штрафов.

Согласно :doc:`порядку работы с черновиками</drafts/порядок работы с черновиками>`, методы данного раздела используются на шаге наполнения черновика. После этого черновик необходимо проверить, подписать и отправить. В результате для декларации УСН будет создан документооборот с типом urn:docflow:fns534-report, а для ИОН запроса urn:docflow:fns534-ion.

Список доступных методов:

* `Формирование документов УСН и ИОН запросов в черновике`_
* `Редактирование и замена документа в черновике`_

Формирование документов УСН и ИОН запросов в черновике
------------------------------------------------------

Метод: `POST BuildDocument`_

Данный метод позволяет создать документ установленного формата в указанном черновике. В методе необходимо выбрать тип документа (USN, ION1, ION2, ION3, ION4, ION5). Параметр версия контракта (version) для УСН принимает значение 1 или 2. Для ИОН запросов версия всегда равна 1. Сам :doc:`контракт</manuals/contracts>` формирования документа необходимо передать в формате валидного JSON.

Метод возвращает сформированный в черновике документ.

Редактирование и замена документа в черновике
---------------------------------------------

Метод: `POST BuildDocumentContent`_

С помощью этого метода можно отредактировать или заменить документ типа декларация УСН или ИОН запрос в черновике. В методе необходимо выбрать тип документа (USN, ION1, ION2, ION3, ION4, ION5). Параметр версия контракта (version) для УСН принимает значение 1 или 2. Для ИОН запросов версия всегда равна 1. Сам :doc:`контракт</manuals/contracts>` формирования документа необходимо передать в формате валидного JSON.

Метод возвращает сформированный в черновике документ.

