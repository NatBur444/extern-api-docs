Сервис контентов
================

Сервис контетов предназначен для загрузки и скачивания файлов.

Что нужно знать о сервисе контентов
-----------------------------------

С помощью методов сервиса контентов можно:

* загрузить контент целиком или по частям,
* скачать контент целиком или по частям.

Для загрузки контентов размером больше 64 МБ следует применять загрузку по частям.

В методах загрузки и получения контента черновиков, документооборотов в соответствующих моделях появился параметр content-id, который содержит идентификатор контента. 
Для поддержания обратной совместимости сохранены старые способы загрузки и скачивания контентов напрямую в методах. 

Все документы, которые появляются в документообороте, будут иметь в модели идентификатор контента content-id. Это означает, что все документы от контролирующего органа также будут доступны для загрузки в сервисе контентов. 

Преимущества сервиса контентов
------------------------------

Сервис контентов позволяет загружать большие файлы отчетов. Сервис может работать с контентами до 100 ГБ. 

Если один и тот же файл необходимо передать в нескольких методах, вам не нужно его загружать повторно, например, для печати. Достаточно передать идентификатор контента. 

Как это работает
----------------

Загружаем файл в сервис контентов
+++++++++++++++++++++++++++++++++

1. Если документ больше 64 МБ, разбиваем на части по 64 МБ.
2. Вызываем метод :ref:`POST Upload<rst-marckup-post-content>`. Для загрузки контента по частям нужно передать заголовок Content-Range.
3. Догружаем части контента методом :ref:`PUT UploadByParts<rst-marckup-put-content>`.

    Части контента не обязательно грузить в порядке очередности. Но в итоге все части контента должны быть переданы. 

5. Передаем идентификатор контента в нужном методе, например, добавление документа в черновик.

Скачиваем файл из сервиса контентов
+++++++++++++++++++++++++++++++++++

1. Получаем документ в черновике или документообороте. 
2. Берем значение параметра content-id.
3. Инициируем получение контента по идентификатору метод :ref:`GET Download<rst-marckup-get-content>`.