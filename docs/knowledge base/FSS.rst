.. _`шлюз ФСС`: http://f4.fss.ru/fss/office
.. _`инструкции`: https://www.kontur-extern.ru/support/faq/31/157
.. _`POST AddDocument`: http://extern-api.testkontur.ru/swagger/ui/index#!/106310771088108510861074108010821080/DraftDocuments_AddDocument
.. _`PUT PutDocumentSignature`: http://extern-api.testkontur.ru/swagger/ui/index#!/106310771088108510861074108010821080/DraftDocuments_PutDocumentSignature
.. _`POST Check`: http://extern-api.testkontur.ru/swagger/ui/index#!/106310771088108510861074108010821080/Drafts_Check
.. _`POST Prepare`: http://extern-api.testkontur.ru/swagger/ui/index#!/106310771088108510861074108010821080/Drafts_Prepare
.. _`POST Send`: http://extern-api.testkontur.ru/swagger/ui/index#!/106310771088108510861074108010821080/Drafts_Send

Документооборот с ФСС
=====================

.. _rst-marckup-dc-fss:

Через API Контур.Экстерна в Фонд социального страхования можно отправить только форму 4-ФСС (тип документооборота urn:docflow:fss-report). Со стороны контролирующего органа отчетность принимает `шлюз ФСС`_, на котором вы можете найти отправленный отчет по его идентификатору.

**Особенности документооборота с ФСС**:

* подпись документа передается вместе с содержимым документа. 
* в данном виде документооборота нет ответных документов. 
* помимо статусов важную роль имеют стадии. Подробное описание представлено в разделе :ref:`спецификация<rst-markup_4fss>`. 

Порядок документооборота по форме 4-ФСС
--------------------------

1. Создаем и наполняем черновик. 
2. Добавляем документ в черновик. Для ДО с ФСС он всегда будет один для файла отчета по форме 4-ФСС. 
  
  В методе `POST AddDocument`_ можно приложить подписи вместе с содержимым документа в ``base64-content`` либо отдельно параметром ``signature``. Также допускается добавить только содержимое документа, а подпись подложить отдельно в методе `PUT PutDocumentSignature`_.

3. Когда черновик готов, запускаем последовательность методов: `POST Check`_ -> `POST Prepare`_ -> `POST Send`_. Если подпись и содержимое документа лежали отдельно, то метод Prepare объединит их в одном поле ``base64-content`` в модели ``documentContents``. 

После отправки отчета требуется дождаться получения квитанции или протокола обработки. Подробное описание документов доступно в `инструкции`_. 