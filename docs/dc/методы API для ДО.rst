.. _`GET Docflows`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows
.. _`GET Docflow`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}
.. _`GET Documents`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents
.. _`GET Document`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}
.. _`GET DocumentDescription`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-description
.. _`GET EncryptedDocumentContent`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-encrypted-content
.. _`GET DecryptedDocumentContent`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-decrypted-content
.. _`GET DocumentSignatures`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-signatures
.. _`GET DocumentSignature`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-signatures-{signatureId}
.. _`GET DocumentSignatureContent`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-signatures-{signatureId}-content
.. _`POST DocumentPrint`: https://developer.testkontur.ru/extern/post-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-print
.. _`POST RecognizeDocument`: https://developer.testkontur.ru/extern/post-v1-{accountId}-docflows-{docflowId}-documents-{documentId}-recognize
.. _`GET RelatedDocflows`: https://developer.testkontur.ru/extern/get-v1-{accountId}-docflows-{relatedDocflowId}-documents-{relatedDocumentId}-related

Методы для работы с документооборотами
======================================

Подробная спецификация методов показана в сваггере в разделе **Документообороты**.

Список доступных методов:

* `Получение списка документооборотов`_
* `Получение документооборота`_
* `Получение списка документов документооборота`_
* `Получение документа`_
* `Получение описания документа`_
* `Получение зашифрованного контента документа`_
* `Получение расшифрованного контента документа`_
* `Получение подписей под документом`_
* `Получение конкретной подписи под документом`_
* `Получение контента конкретной подписи под документом`_
* `Печать документов`_
* `Распознавание входящего требования`_
* `Получение связанных документооборотов`_

.. _rst-markup-get-dcs:

Получение списка документооборотов 
----------------------------------

Метод: `GET Docflows`_

С помощью этого метода можно получить список всех документооборотов учетной записи, при этом можно применить различные фильтры, чтобы получить необходимую выборку интересных на данный момент документооборотов. В ответе получает список документооборотов с необходимой мета-информацией по ним.

Сценарии, в которых можно использовать списки документооборотов:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

* узнавать о входящих документооборотах;
* следить за статусом исходящих документооборотов;
* отображать пользователю списки его документооборотов, применяя различные фильтры.

.. _rst-markup-get-dc:

Получение документооборота
--------------------------

Метод: `GET Docflow`_

С помощью этого метода можно получить всю информацию о документообороте, такую как:

* его текущий статус;
* мета-информацию документооборота;
* перечень всех документов, созданных в ходе документооборота, на данный момент;
* и многое другое, полный ответ можно посмотреть в сваггере.

Если текущий статус документооборота подразумевает необходимость отправки ответного документа в контролирующий орган, среди ссылок в ответе этого метода будет ссылка на методы для работы с ответными документами :doc:`→ </dc/ответный документ>`.

Получение списка документов документооборота 
--------------------------------------------

Метод: `GET Documents`_

С помощью этого метода можно получить данные всех документов, созданных и полученных в ходе документооборота.

Получение документа 
-------------------

Метод: `GET Document`_

C помощью этого метода можно получить отдельный документ, созданный или полученный в ходе документооборота, с его описанием и контентами. У каждого документа будет ссылка на контенты (зашифрованный или расшифрованный, либо оба) в текущем состоянии в соответствии с требованиями контролирующих органов.

Получение описания документа 
----------------------------

Метод: `GET DocumentDescription`_

Данный метод позволяет отдельно получить описание документа, входящего в документооборот.

Получение зашифрованного контента документа 
-------------------------------------------

Метод: `GET EncryptedDocumentContent`_

Зашифрованный контент возвращается в формате base64. Чтобы получить контент, его нужно конвертировать, дешифровать при помощи закрытого ключа, на который он был зашифрован. В результате вы получите архив, который нужно разархивировать.

Получение расшифрованного контента документа 
--------------------------------------------

Метод: `GET DecryptedDocumentContent`_

Наличие расшифрованного контента возможно не для всех документов.

Получение подписей под документом 
---------------------------------

Метод: `GET DocumentSignatures`_

В некоторых случаях у документа может быть несколько подписей. В ответе будут возвращены все подписи под запрашиваемым документом.

Получение конкретной подписи под документом 
-------------------------------------------

Метод: `GET DocumentSignature`_

В ответе будет мета-информация подписи и ссылка на её контент.

Получение контента конкретной подписи под документом 
----------------------------------------------------

Метод: `GET DocumentSignatureContent`_

Печать документов 
-----------------

Метод: `POST DocumentPrint`_

Можно получить печатную форму любого формализованного документа в документообороте. Печать документов происходит только после проверки подписей под печатаемыми документами, тем самым подтверждается валидность и неизменность печатаемых документов.

.. _rst-markup-document-recognize:

Распознавание входящего требования
----------------------------------

Метод:  `POST RecognizeDocument`_

Данный метод позволяет распознать номер и дату требования, список ИНН из требования. Данные возвращаются в ответ на переданные идентификаторы входящего требования. Само требование передается в теле запроса в формате файла. Результат запроса запишется в мета-информацию документа. 

Получение связанных документооборотов
-------------------------------------

Метод: `GET RelatedDocflows`_

Метод позволяет получить документообороты типа ответ на требование и письмо, которые могут быть связаны с входящим документооборотом и документом в нем. 
